<p-toast />
<p-confirmdialog />
<app-customer-form
  [visible]="openModalCreateAndUpdateCustomer"
  (close)="closeModal($event)"
  [customer]="selectedCustomer"
></app-customer-form>
<!--   [isUpdate]="true" -->
<p-toolbar styleClass="w-full">
  <ng-template #start>
    <app-search (customers)="filterCustomers($event)"></app-search>
  </ng-template>

  <ng-template #end>
    <!--     <p-fileUpload
      mode="basic"
      accept="image/*"
      [maxFileSize]="1000000"
      label="Importar Clientes"
      chooseLabel="Import"
      auto
      customUpload
      class="mr-2 inline-block"
      [chooseButtonProps]="{ severity: 'secondary' }"
    /> -->
    <p-button
      label="Nuevo Cliente"
      icon="pi pi-plus"
      class="mr-2"
      (onClick)="newCustomer()"
    />
    <!--  <p-button
      severity="danger"
      label="Delete"
      icon="pi pi-trash"
      outlined
      (onClick)="deleteSelectedProducts()"
      [disabled]="!selectsMessage || !selectsMessage.length"
    /> -->
    <p-button
      label="Importar Clientes"
      icon="pi pi-upload"
      severity="secondary"
      (onClick)="importListCustomers()"
    />
  </ng-template>
</p-toolbar>
<p-card>
  <p-table
    [value]="customer"
    responsiveLayout="scroll"
    [scrollable]="true"
    scrollHeight="flex"
    [showGridlines]="true"
    [stripedRows]="true"
  >
    <ng-template #header>
      <tr>
        <th>N°</th>
        <th>Nombres</th>
        <th>Telefono</th>
        <th>Sucursal</th>
        <th>Estado</th>
        <th>Fecha Creación</th>
        <th>Acciones</th>
      </tr>
    </ng-template>
    <ng-template #body let-customer let-i="rowIndex">
      <tr>
        <td>{{ i + 1 }}</td>
        <td>{{ customer.names }}</td>
        <td>{{ customer.phone }}</td>
        <td>
          <p-tag severity="danger" [value]="customer.branch.name"></p-tag>
        </td>
        <td>
          <p-tag [value]="customer.status"></p-tag>
        </td>

        <td>
          {{ customer.createdAt | date : "dd/MM/yyyy HH:mm" }}
        </td>

        <td>
          <p-button
            icon="pi pi-pencil"
            class="mr-2"
            [rounded]="true"
            [outlined]="true"
            (click)="editCustomer(customer)"
          />
          <p-button
            icon="pi pi-trash"
            severity="danger"
            [rounded]="true"
            [outlined]="true"
            (click)="deleteCustomer(customer)"
          />
        </td>
      </tr>
    </ng-template>
    <ng-template pTemplate="emptymessage">
      <tr>
        <td colspan="6" class="text-center p-4">
          <div class="flex flex-col items-center justify-center">
            <i
              class="pi pi-inbox mb-3 justify-center items-center"
              style="font-size: 2rem"
            ></i>
            <span>No se encontraron los contactos</span>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-card>
<div class="card flex justify-center">
  <!--   (onPageChange)="onPageChange($event)" -->
  <p-paginator
    [first]="first"
    [rows]="rows"
    [totalRecords]="120"
    [rowsPerPageOptions]="[10, 20, 30]"
  ></p-paginator>
</div>
